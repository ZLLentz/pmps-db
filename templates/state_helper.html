<!-- Singular State Edit Form -->
{% extends "base.html" %}

{% block content %}
<div class="container border">
  {% if not new %}
    <!-- Page Title/Information for Form-->
    <div class="row">
      <h4>State Name: {{ state_content['states']['name'] }}</h4>
    </div>
    <div class="row">
      <div class="col-sm">
        <h5> ID: {{ state_content['states']['id'] }}</h5>
      </div>
      <!-- History Selector -->
      <div class="col-sm float-start">
        <form action="/state_history/" method="post">
          <input type="hidden" name="state_id" value="{{ state_content['states']['id'] }}"></input>
          <input type="hidden" name="device_name" value="{{ state_content['device_name'] }}"></input>
          <button class="button" name="history" type="submit">History</button>
        </form>
      </div>
      <div class="col">
        Device ID:
      </div>
      <div class="col">
        <input disabled name="device_name" value="{{ state_content['device_name'] }}"></input>
      </div>
      <div class="col"></div>
    <form action="/update_state/" name="update_state_form" method="post">
  {% elif new %}
  <form action="/update_state/" name="update_state_form" method="post">
    <div class="row">
      <div class="col-sm-3">
        Adding New State for Device:
      </div>
      <div class="col-sm-2">
        <select name=device_select method="post" action="/">
          {% for device in devices %}
            {% if device == state_content['device_name'] %}
              <option value= "{{ device }}" SELECTED>{{ device }}</option>"
            {% else %}
            <option value= "{{ device }}">{{ device }}</option>"
            {% endif %}
          {% endfor %}
        </select>
      </div>
    </div>
  {% endif %}
  {% if message %}
    <div class="col-xl text-end">
      <h5 class="text-success">{{ message }}</h5>
    </div>
  {% endif %}
    </div>
<!-- State Edit Form -->
  <div class="container">
      <input type="hidden" name="device_name" value="{{ state_content['device_name'] }}"></input>
      <div class="row table-responsive">
        <table class="table table-striped border" id="states" >
          <tbody>
            {% if not new %}
              <tr>
                <td><th>{{ state_content["titles"][0] }}</th></td>
                <td>
                  <input type="hidden" name="s_id" value="{{ state_content['states']['id'] }}"></input>
                <text>{{ state_content["states"]['id'] }}</text>
                </td>
              </tr>
            {% elif new %}
              <input type="hidden" name="s_id" value="None"></input>
            {% endif %}
            <tr>
                <td><th>{{state_content["titles"][1]}}</th></td>
              {% if new %}
                <td>{{ state_content['device_name'] }}-<input type="text" name="s_name" value="{{ state_content['states']['name'] }}"></td></tr>
              {% else %}
                <td><input type="text" name="s_name" value="{{ state_content['states']['name'] }}">
                <!--<td><input type="text" name="s_name" disabled value="{{ state_content['states']['name'] }}">-->
                  <input type="text" name="s_name" hidden value="{{ state_content['states']['name'] }}">
                </td></tr>
              {% endif %}
            <tr>
              <td><th>{{state_content["titles"][2]}}</th></td>
              <td><select name="s_beam" method="post" action="/">
                {% for bl in config["beamlines"] %}
                  {% if bl == state_content['states']['beamline'] %}
                    <option value= "{{ bl }}" SELECTED>{{ bl }}</option>"
                  {% else %}
                    <option value= "{{ bl }}">{{ bl }}</option>"
                  {% endif %}
                {% endfor %}
              </select></td>
            </tr>
            <!-- Beam Class -->           
            <tr>
              <td><th>{{state_content["titles"][3]}}</th></td>
              <!--{% if new %}
                <td><input type="text" name="s_bcr" value="{{ config.form_defaults['nBeamClassRange'] }}">
              {% else %}
                <td><input type="text" name="s_bcr" value="{{ state_content['states']['nBeamClassRange'] }}">
              {% endif %}              
              </td></tr>-->
              <!-- Selector Test -->
              <td><div class="row g-0">
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-1" autocomplete="off">
                  <label class="btn-color btn" for="bc-1"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-2" autocomplete="off">
                  <label class="btn-color btn" for="bc-2"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-3" autocomplete="off">
                  <label class="btn-color btn" for="bc-3"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-4" autocomplete="off">
                  <label class="btn-color btn" for="bc-4"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-5" autocomplete="off">
                  <label class="btn-color btn" for="bc-5"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-6" autocomplete="off">
                  <label class="btn-color btn" for="bc-6"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-7" autocomplete="off">
                  <label class="btn-color btn" for="bc-7"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-8" autocomplete="off">
                  <label class="btn-color btn" for="bc-8"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-9"autocomplete="off">
                  <label class="btn-color btn" for="bc-9"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-10" autocomplete="off">
                  <label class="btn-color btn" for="bc-10"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-11" autocomplete="off">
                  <label class="btn-color btn" for="bc-11"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-12" autocomplete="off">
                  <label class="btn-color btn" for="bc-12"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-13" autocomplete="off">
                  <label class="btn-color btn" for="bc-13"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-14" autocomplete="off">
                  <label class="btn-color btn" for="bc-14"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="bc-15" autocomplete="off">
                  <label class="btn-color btn" for="bc-15"></label>
                </div>
              </div></td>
            </tr>
            <!-- EV Range-->
            <tr>
              <td><th>{{state_content["titles"][4]}}</th></td>
              <!--{% if new %}
                <td><input type="text" name="s_nev" value="{{ config.form_defaults['neVRange'] }}">
              {% else %}
                <td><input type="text" name="s_nev" value="{{ state_content['states']['neVRange'] }}">
              {% endif %}
              </td></tr>-->
              <td><div class="row g-0">
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-1" autocomplete="off">
                  <label class="btn-color btn" for="ev-1"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-2" autocomplete="off">
                  <label class="btn-color btn" for="ev-2"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-3" autocomplete="off">
                  <label class="btn-color btn" for="ev-3"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-4" autocomplete="off">
                  <label class="btn-color btn" for="ev-4"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-5" autocomplete="off">
                  <label class="btn-color btn" for="ev-5"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-6" autocomplete="off">
                  <label class="btn-color btn" for="ev-6"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-7" autocomplete="off">
                  <label class="btn-color btn" for="ev-7"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-8" autocomplete="off">
                  <label class="btn-color btn" for="ev-8"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-9"autocomplete="off">
                  <label class="btn-color btn" for="ev-9"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-10" autocomplete="off">
                  <label class="btn-color btn" for="ev-10"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-11" autocomplete="off">
                  <label class="btn-color btn" for="ev-11"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-12" autocomplete="off">
                  <label class="btn-color btn" for="ev-12"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-13" autocomplete="off">
                  <label class="btn-color btn" for="ev-13"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-14" autocomplete="off">
                  <label class="btn-color btn" for="ev-14"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-15" autocomplete="off">
                  <label class="btn-color btn" for="ev-15"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-16" checked autocomplete="off">
                  <label class="btn-color btn" for="ev-16"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-17" autocomplete="off">
                  <label class="btn-color btn" for="ev-17"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-18" autocomplete="off">
                  <label class="btn-color btn" for="ev-18"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-19" autocomplete="off">
                  <label class="btn-color btn" for="ev-19"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-20" autocomplete="off">
                  <label class="btn-color btn" for="ev-20"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-21" autocomplete="off">
                  <label class="btn-color btn" for="ev-21"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-22" autocomplete="off">
                  <label class="btn-color btn" for="ev-22"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-23" autocomplete="off">
                  <label class="btn-color btn" for="ev-23"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-24"autocomplete="off">
                  <label class="btn-color btn" for="ev-24"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-25" autocomplete="off">
                  <label class="btn-color btn" for="ev-25"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-26" autocomplete="off">
                  <label class="btn-color btn" for="ev-26"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-27" autocomplete="off">
                  <label class="btn-color btn" for="ev-27"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-28" autocomplete="off">
                  <label class="btn-color btn" for="ev-28"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-29" autocomplete="off">
                  <label class="btn-color btn" for="ev-29"> </label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-30" autocomplete="off">
                  <label class="btn-color btn" for="ev-30"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-31" autocomplete="off">
                  <label class="btn-color btn" for="ev-31"></label>
                </div>
                <div class="col">
                  <input type="checkbox" class="btn-check" id="ev-32" autocomplete="off">
                  <label class="btn-color btn" for="ev-32"></label>
                </div>
              </div></td>
            </tr>
            <!-- NTran -->
            <tr>
              <td><th>{{state_content["titles"][5]}}</th></td>
              {% if new %}
                <td><input type="text" name="s_nt" value="{{ config.form_defaults['nTran'] }}">   Note: 1 is full transmission
              {% else %}
                <td><input type="text" name="s_nt" value="{{ state_content['states']['nTran'] }}">    Note: 1 is full transmission
              {% endif %}
              </td></tr>
            <!-- NRate -->
            <tr>
              <td><th>{{state_content["titles"][6]}}</th></td>
              <td><select name=s_nr method="post" action="/">
                {% for nr in config.form_defaults["nRate"] %}
                  {% if nr == state_content['states']['nRate'] %}
                    <option value= "{{ nr }}" SELECTED>{{ nr }}</option>
                  {% else %}
                    <option value= "{{ nr }}">{{ nr }}</option>
                  {% endif %}
                {% endfor %}
              </select> Hz</td>
            </tr>
            <!-- Aperture Name -->
            <tr>
              <td><th>{{state_content["titles"][7]}}</th></td>
              <td><select name="s_as" method="post" action="/">
                {% for ap in config.form_defaults["aperture"] %}
                  {% if ap == state_content['states']['ap_name'] %}
                    <option value= "{{ ap }}" SELECTED>{{ ap }}</option> 
                  {% else %}
                    <option value= "{{ ap }}">{{ ap }}</option>
                  {% endif %}
                {% endfor %}
              </select></td>
              </td></tr>
            <!-- Aperture Values -->
            <tr>
              <td><th>{{state_content["titles"][8]}}</th></td>
              <td><input type="text" name="s_ayg" value="{{ state_content['states']['ap_ygap'] }}"> mm
              </td></tr>            
            <tr>
                <td><th>{{state_content["titles"][9]}}</th></td>
                <td><input type="text" name="s_ayc" value="{{ state_content['states']['ap_ycenter'] }}"> mm
                </td></tr>
            <tr>
              <td><th>{{state_content["titles"][10]}}</th></td>
              <td><input type="text" name="s_axg" value="{{ state_content['states']['ap_xgap'] }}"> mm
              </td></tr>
            <tr>
              <td><th>{{state_content["titles"][11]}}</th></td>
              <td><input type="text" name="s_axc" value="{{ state_content['states']['ap_xcenter'] }}"> mm
              </td></tr>
            <!-- Other Data-->
            <tr>
              <td><th>{{state_content["titles"][12]}}</th></td>
              <td><input type="text" name="s_apn" value="{{ state_content['states']['damage_limit'] }}">
              </td></tr>
            <tr>
              <td><th>{{state_content["titles"][13]}}</th></td>
              <td><input type="text" name="s_pen" value="{{ state_content['states']['pulse_energy'] }}">
              </td></tr>
            <tr>
              <td><th>{{state_content["titles"][14]}}</th></td>
              <td><input type="text" name="s_on" value="{{ state_content['states']['notes'] }}">
              </td></tr>       
            <tr>
              <td><th>{{state_content["titles"][15]}}</th></td>
              {% if state_content['states']['special'] %}
                <td><input type="checkbox" checked name="s_sp" value="special"></input>
              {% else %}
                <td><input type="checkbox" name="s_sp" value="special"></input>
              {% endif %}
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note: Select if edge case, include reasoning in notes field</td>
            </tr>     
            <tr>
              <td><th>{{state_content["titles"][16]}}</th></td>
              <td><input type="text" name="s_rt" value="{{ state_content['states']['reactive_temp'] }}">
              </td></tr>     
            <tr>
              <td><th>{{state_content["titles"][17]}}</th></td>
              <td><input type="text" name="s_rp" value="{{ state_content['states']['reactive_pressure'] }}">
              </td></tr>  
          </tbody>
        </table>
      </div>
      <button name="update_state_button" type="submit">Submit</button>
    </form>
  </div>
</div>
{% endblock %}